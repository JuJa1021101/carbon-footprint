{"version":3,"file":"settings.js","sources":["pages/profile/settings.vue","../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9zZXR0aW5ncy52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 顶部导航栏 -->\n    <view class=\"header bg-green px-4 py-3\">\n      <view class=\"flex items-center\">\n        <view @tap=\"goBack\">\n          <icon-image name=\"back\" size=\"22\" color=\"#FFFFFF\"></icon-image>\n        </view>\n        <view class=\"flex-1 text-center\">\n          <text class=\"text-white text-lg font-medium\">设置</text>\n        </view>\n        <view class=\"w-24px\"></view> <!-- 为了居中标题的占位 -->\n      </view>\n    </view>\n    \n    <!-- 功能菜单 -->\n    <view class=\"menu-card mb-4\">\n      <view class=\"menu-item\" @tap=\"navigateToAddressManage\">\n        <view class=\"menu-icon bg-teal-50\">\n          <image src=\"/static/images/menu/icon-address.png\" class=\"menu-item-icon\"></image>\n        </view>\n        <text class=\"text-gray-700\">地址管理</text>\n        <view class=\"ml-auto\">\n          <text class=\"text-gray-400\">></text>\n        </view>\n      </view>\n\n      <view class=\"menu-item\">\n        <view class=\"menu-icon bg-blue-50\">\n          <image src=\"/static/images/menu/icon-feedback.png\" class=\"menu-item-icon\"></image>\n        </view>\n        <text class=\"text-gray-700\">问题反馈</text>\n        <view class=\"ml-auto\">\n          <text class=\"text-gray-400\">></text>\n        </view>\n      </view>\n      \n      <view class=\"menu-item\">\n        <view class=\"menu-icon bg-purple-50\">\n          <image src=\"/static/images/menu/icon-about.png\" class=\"menu-item-icon\"></image>\n        </view>\n        <text class=\"text-gray-700\">关于小程序</text>\n        <view class=\"ml-auto\">\n          <text class=\"text-gray-400\">></text>\n        </view>\n      </view>\n      \n      <view class=\"menu-item\" @tap=\"navigateToAdminLogin\">\n        <view class=\"menu-icon bg-amber-50\">\n          <image src=\"/static/images/menu/icon-admin.png\" class=\"menu-item-icon\"></image>\n        </view>\n        <text class=\"text-gray-700\">管理员模式</text>\n        <view class=\"ml-auto\">\n          <text class=\"text-gray-400\">></text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 退出登录 -->\n    <view class=\"px-4 mb-4\">\n      <button class=\"w-full py-3 rounded-full bg-white text-red-500\" @tap=\"showLogoutConfirm\">退出登录</button>\n    </view>\n    \n    <!-- 版本信息 -->\n    <view class=\"version-info text-center\">\n      <text class=\"text-gray-400 text-sm\">环保先锋 v1.0.0</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { logout } from '../../services/login.js';\nimport IconImage from '../../components/IconImage.vue';\n\n// 返回上一页\nconst goBack = () => {\n  uni.navigateBack();\n};\n\n// 跳转到地址管理页面\nconst navigateToAddressManage = () => {\n  uni.navigateTo({\n    url: '/pages/profile/address'\n  });\n};\n\n// 跳转到管理员登录页面\nconst navigateToAdminLogin = () => {\n  // 预检查是否已登录，若已登录则直接跳转到控制台\n  const adminLoginStatus = uni.getStorageSync('admin_login_status');\n  \n  // 直接跳转到登录页，简化逻辑\n  uni.navigateTo({\n    url: '/pages/admin/login',\n    success: () => {\n      console.log('成功导航到管理员登录页面');\n    },\n    fail: (err) => {\n      console.error('导航到管理员登录页面失败:', err);\n      // 导航失败时，尝试使用redirectTo\n      uni.redirectTo({\n        url: '/pages/admin/login',\n        fail: (redirectErr) => {\n          console.error('重定向到管理员登录页面也失败:', redirectErr);\n          uni.showToast({\n            title: '页面跳转失败，请重试',\n            icon: 'none'\n          });\n        }\n      });\n    }\n  });\n};\n\n// 显示退出登录确认弹窗\nconst showLogoutConfirm = () => {\n  uni.showModal({\n    title: '提示',\n    content: '确认退出登录？',\n    success: (res) => {\n      if (res.confirm) {\n        handleLogout();\n      }\n    }\n  });\n};\n\n// 退出登录\nconst handleLogout = () => {\n  // 显示加载中\n  uni.showLoading({\n    title: '退出中...'\n  });\n  \n  setTimeout(() => {\n    uni.hideLoading();\n    \n    // 调用退出登录服务\n    logout();\n    \n    // 返回到登录页\n    uni.reLaunch({\n      url: '/pages/login/login'\n    });\n  }, 1000);\n};\n\nonMounted(() => {\n  console.log('设置页面加载');\n});\n</script>\n\n<style>\n.container {\n  background-color: #f8f9fa;\n  min-height: 100vh;\n}\n\n.header {\n  padding-top: 44px;\n  padding-bottom: 12px;\n  box-sizing: content-box;\n}\n\n.bg-green {\n  background-color: #4CAF50;\n}\n\n.w-24px {\n  width: 24px;\n}\n\n.menu-card {\n  margin-top: 20px;\n  border-radius: 16px;\n  background-color: white;\n  overflow: hidden;\n}\n\n.menu-item {\n  display: flex;\n  align-items: center;\n  padding: 16px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.menu-item:last-child {\n  border-bottom: none;\n}\n\n.menu-icon {\n  width: 40px;\n  height: 40px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 16px;\n}\n\n.version-info {\n  position: absolute;\n  bottom: 30px;\n  left: 0;\n  right: 0;\n}\n\n.bg-white { background-color: #ffffff; }\n.text-white { color: #ffffff; }\n.text-gray-400 { color: #9ca3af; }\n.text-gray-700 { color: #374151; }\n.text-red-500 { color: #ef4444; }\n.text-teal-500 { color: #14b8a6; }\n.text-blue-500 { color: #3b82f6; }\n.text-purple-500 { color: #8b5cf6; }\n.bg-teal-50 { background-color: #e6fffa; }\n.bg-blue-50 { background-color: #eff6ff; }\n.bg-purple-50 { background-color: #faf5ff; }\n.bg-amber-50 { background-color: #fff3e0; }\n.bg-green-50 { background-color: #ecfdf5; }\n.text-green-500 { color: #22c55e; }\n\n.flex { display: flex; }\n.flex-1 { flex: 1; }\n.items-center { align-items: center; }\n.justify-center { justify-content: center; }\n.text-center { text-align: center; }\n\n.p-4 { padding: 16px; }\n.px-4 { padding-left: 16px; padding-right: 16px; }\n.py-3 { padding-top: 12px; padding-bottom: 12px; }\n\n.mb-4 { margin-bottom: 16px; }\n.ml-auto { margin-left: auto; }\n\n.text-lg { font-size: 18px; }\n.text-sm { font-size: 14px; }\n.font-medium { font-weight: 500; }\n\n.rounded-full { border-radius: 9999px; }\n.w-full { width: 100%; }\n\n.menu-item-icon {\n  width: 24px;\n  height: 24px;\n}\n</style> ","import MiniProgramPage from 'D:/Documents/HBuilderProjects/CarbonFootprint/pages/profile/settings.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","logout","onMounted","MiniProgramPage"],"mappings":";;;;;;;AAyEA,MAAM,YAAY,MAAW;;;;AAG7B,UAAM,SAAS,MAAM;AACnBA,oBAAG,MAAC,aAAY;AAAA,IAClB;AAGA,UAAM,0BAA0B,MAAM;AACpCA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AAGA,UAAM,uBAAuB,MAAM;AAERA,oBAAG,MAAC,eAAe,oBAAoB;AAGhEA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,QACL,SAAS,MAAM;AACbA,wBAAAA,MAAY,MAAA,OAAA,oCAAA,cAAc;AAAA,QAC3B;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAc,MAAA,MAAA,SAAA,qCAAA,iBAAiB,GAAG;AAElCA,wBAAAA,MAAI,WAAW;AAAA,YACb,KAAK;AAAA,YACL,MAAM,CAAC,gBAAgB;AACrBA,4BAAc,MAAA,MAAA,SAAA,qCAAA,mBAAmB,WAAW;AAC5CA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,cAClB,CAAW;AAAA,YACF;AAAA,UACT,CAAO;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,oBAAoB,MAAM;AAC9BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf;UACD;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AAGA,UAAM,eAAe,MAAM;AAEzBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MACX,CAAG;AAED,iBAAW,MAAM;AACfA,sBAAG,MAAC,YAAW;AAGfC,uBAAAA;AAGAD,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,QACX,CAAK;AAAA,MACF,GAAE,GAAI;AAAA,IACT;AAEAE,kBAAAA,UAAU,MAAM;AACdF,oBAAAA,MAAY,MAAA,OAAA,qCAAA,QAAQ;AAAA,IACtB,CAAC;;;;;;;;;;;;;;;;;;;;ACrJD,GAAG,WAAWG,SAAe;"}