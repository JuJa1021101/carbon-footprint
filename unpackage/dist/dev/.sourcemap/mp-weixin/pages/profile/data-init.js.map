{"version":3,"file":"data-init.js","sources":["pages/profile/data-init.vue","../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9kYXRhLWluaXQudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 头部导航 -->\n    <view class=\"header bg-white\">\n      <view class=\"flex items-center px-4\">\n        <view class=\"back-button\" @tap=\"goBack\">\n          <text class=\"iconfont icon-arrow-left\"></text>\n        </view>\n        <text class=\"title\">数据初始化工具</text>\n      </view>\n    </view>\n\n    <view class=\"content\">\n      <view class=\"card\">\n        <view class=\"card-title\">系统数据初始化</view>\n        <view class=\"card-description\">\n          本页面用于初始化系统测试数据，仅开发环境使用。\n        </view>\n        \n        <view class=\"button-group\">\n          <button class=\"btn\" @tap=\"initMallData\">\n            <text class=\"btn-text\">初始化商城奖品数据</text>\n          </button>\n          \n          <button class=\"btn\" @tap=\"initOrderData\">\n            <text class=\"btn-text\">初始化订单数据</text>\n          </button>\n          \n          <button class=\"btn btn-view\" @tap=\"viewOrders\">\n            <text class=\"btn-text\">查看订单页面</text>\n          </button>\n        </view>\n        \n        <view class=\"log-container\" v-if=\"logs.length > 0\">\n          <view class=\"log-title\">操作日志:</view>\n          <view class=\"log-item\" v-for=\"(log, index) in logs\" :key=\"index\">\n            <text :class=\"['log-text', {'success': log.success, 'error': !log.success}]\">\n              {{log.time}} - {{log.message}}\n            </text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\n\n// 操作日志\nconst logs = ref([]);\n\n// 添加日志\nconst addLog = (message, success = true) => {\n  const now = new Date();\n  const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\n  \n  logs.value.unshift({\n    time,\n    message,\n    success\n  });\n  \n  // 最多保留20条日志\n  if (logs.value.length > 20) {\n    logs.value.pop();\n  }\n};\n\n// 初始化商城奖品数据\nconst initMallData = async () => {\n  try {\n    uni.showLoading({\n      title: '初始化中...'\n    });\n    \n    addLog('开始初始化商城奖品数据...');\n    \n    const { result } = await uniCloud.callFunction({\n      name: 'initMallData'\n    });\n    \n    if (result && result.success) {\n      uni.showToast({\n        title: `成功创建${result.count}个奖品`,\n        icon: 'success'\n      });\n      addLog(`商城奖品数据初始化成功，共${result.count}个奖品`);\n    } else {\n      uni.showToast({\n        title: result?.message || '初始化失败',\n        icon: 'none'\n      });\n      addLog(`商城奖品数据初始化失败: ${result?.message || '未知错误'}`, false);\n    }\n  } catch (error) {\n    console.error('初始化商城奖品数据失败:', error);\n    uni.showToast({\n      title: '初始化失败',\n      icon: 'none'\n    });\n    addLog(`商城奖品数据初始化异常: ${error.message}`, false);\n  } finally {\n    uni.hideLoading();\n  }\n};\n\n// 初始化订单数据\nconst initOrderData = async () => {\n  try {\n    uni.showLoading({\n      title: '初始化中...'\n    });\n    \n    addLog('开始初始化订单数据...');\n    \n    const { result } = await uniCloud.callFunction({\n      name: 'initOrderData'\n    });\n    \n    if (result && result.success) {\n      uni.showToast({\n        title: `成功创建${result.count}条订单`,\n        icon: 'success'\n      });\n      addLog(`订单数据初始化成功，共${result.count}条订单`);\n    } else {\n      uni.showToast({\n        title: result?.message || '初始化失败',\n        icon: 'none'\n      });\n      addLog(`订单数据初始化失败: ${result?.message || '未知错误'}`, false);\n    }\n  } catch (error) {\n    console.error('初始化订单数据失败:', error);\n    uni.showToast({\n      title: '初始化失败',\n      icon: 'none'\n    });\n    addLog(`订单数据初始化异常: ${error.message}`, false);\n  } finally {\n    uni.hideLoading();\n  }\n};\n\n// 查看订单页面\nconst viewOrders = () => {\n  uni.navigateTo({\n    url: '/pages/profile/orders'\n  });\n};\n\n// 返回上一页\nconst goBack = () => {\n  uni.navigateBack({\n    delta: 1,\n    fail: () => {\n      uni.switchTab({\n        url: '/pages/profile/profile'\n      });\n    }\n  });\n};\n</script>\n\n<style>\n.container {\n  background-color: #f8f9fa;\n  font-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\n  color: #333;\n  min-height: 100vh;\n  box-sizing: border-box;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  padding: 20px 0;\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.title {\n  font-size: 18px;\n  font-weight: bold;\n  flex: 1;\n  text-align: center;\n}\n\n.back-button {\n  width: 40px;\n  height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n}\n\n.content {\n  padding: 20px;\n}\n\n.card {\n  background-color: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n\n.card-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 12px;\n  text-align: center;\n}\n\n.card-description {\n  font-size: 14px;\n  color: #6b7280;\n  margin-bottom: 20px;\n  text-align: center;\n}\n\n.button-group {\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  margin-bottom: 20px;\n}\n\n.btn {\n  background-color: #4CAF50;\n  border-radius: 8px;\n  height: 45px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n}\n\n.btn-view {\n  background-color: #3498db;\n}\n\n.btn-text {\n  font-size: 16px;\n  font-weight: 500;\n}\n\n.log-container {\n  margin-top: 20px;\n  border-top: 1px solid #e5e7eb;\n  padding-top: 15px;\n}\n\n.log-title {\n  font-size: 16px;\n  font-weight: bold;\n  margin-bottom: 10px;\n}\n\n.log-item {\n  padding: 8px 0;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.log-text {\n  font-size: 14px;\n  font-family: monospace;\n}\n\n.success {\n  color: #4CAF50;\n}\n\n.error {\n  color: #e74c3c;\n}\n\n/* 工具类 */\n.px-4 { padding-left: 16px; padding-right: 16px; }\n.flex { display: flex; }\n.items-center { align-items: center; }\n.bg-white { background-color: #ffffff; }\n</style> ","import MiniProgramPage from 'D:/Documents/HBuilderProjects/CarbonFootprint/pages/profile/data-init.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","uniCloud","MiniProgramPage"],"mappings":"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"}