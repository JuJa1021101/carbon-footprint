{"version":3,"file":"community.js","sources":["pages/community/community.vue","../../../Software/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29tbXVuaXR5L2NvbW11bml0eS52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 顶部导航栏 -->\n    <view class=\"px-4 pt-10 pb-4 bg-white\">\n      <view class=\"flex items-center justify-between mb-4\">\n        <text class=\"text-xl font-bold\">环保社区</text>\n        <IconImage name=\"more\" :size=\"16\" />\n      </view>\n\n      <!-- 搜索框 -->\n      <view class=\"search-container\">\n        <view class=\"search-input-wrapper\">\n          <view class=\"search-icon-wrapper\">\n            <IconImage name=\"search\" :size=\"16\" class=\"search-icon\" @tap=\"handleSearch\" />\n          </view>\n          <input \n            type=\"text\" \n            v-model=\"searchKeyword\"\n            class=\"search-input\" \n            placeholder=\"搜索社区内容...\"\n            @confirm=\"handleSearch\">\n          <view v-if=\"searchKeyword\" class=\"clear-icon-wrapper\" @tap=\"clearSearch\">\n            <IconImage name=\"close-circle\" :size=\"16\" class=\"clear-icon\" />\n          </view>\n        </view>\n        \n        <!-- 搜索状态 -->\n        <view v-if=\"isSearchMode\" class=\"search-status mt-2\">\n          <view class=\"flex items-center\">\n            <text class=\"text-sm\">关键词: \"{{ searchKeyword }}\"</text>\n            <text class=\"text-xs text-gray-500 ml-2\">(找到 {{ total }} 条结果)</text>\n            <view class=\"ml-auto\">\n              <text class=\"text-green-500 text-sm\" @tap=\"exitSearch\">退出搜索</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 标签筛选 -->\n    <view class=\"px-4 py-3 bg-white border-b\">\n      <view class=\"flex justify-around\">\n        <view \n          class=\"tab-btn\" \n          :class=\"{ 'active font-medium': activeTab === 'recommend', 'text-gray-500': activeTab !== 'recommend' }\"\n          @tap=\"switchTab('recommend')\">\n          <text>推荐</text>\n          <view class=\"tab-indicator\" v-if=\"activeTab === 'recommend'\"></view>\n        </view>\n        <view \n          class=\"tab-btn\" \n          :class=\"{ 'active font-medium': activeTab === 'latest', 'text-gray-500': activeTab !== 'latest' }\"\n          @tap=\"switchTab('latest')\">\n          <text>最新</text>\n          <view class=\"tab-indicator\" v-if=\"activeTab === 'latest'\"></view>\n        </view>\n        <view \n          class=\"tab-btn\" \n          :class=\"{ 'active font-medium': activeTab === 'hot', 'text-gray-500': activeTab !== 'hot' }\"\n          @tap=\"switchTab('hot')\">\n          <text>热门</text>\n          <view class=\"tab-indicator\" v-if=\"activeTab === 'hot'\"></view>\n        </view>\n        <view \n          class=\"tab-btn\" \n          :class=\"{ 'active font-medium': activeTab === 'follow', 'text-gray-500': activeTab !== 'follow' }\"\n          @tap=\"switchTab('follow')\">\n          <text>关注</text>\n          <view class=\"tab-indicator\" v-if=\"activeTab === 'follow'\"></view>\n        </view>\n      </view>\n    </view>\n\n    <!-- 内容区 -->\n    <view class=\"p-4\">\n      <!-- 加载中 -->\n      <view v-if=\"loading\" class=\"flex justify-center py-10\">\n        <image src=\"/static/images/loading.gif\" class=\"w-12 h-12\"></image>\n      </view>\n      \n      <!-- 空状态 -->\n      <view v-else-if=\"posts.length === 0\" class=\"flex flex-col items-center py-10\">\n        <image src=\"/static/images/empty-state.png\" class=\"w-32 h-32 mb-4\"></image>\n        <text class=\"text-gray-500\">暂无内容</text>\n      </view>\n      \n      <!-- 帖子卡片 -->\n      <block v-else>\n        <view v-for=\"(post, index) in posts\" :key=\"post._id\" class=\"card bg-white shadow-sm mb-4\">\n          <view class=\"p-3\">\n            <!-- 用户信息 -->\n            <view class=\"flex items-center mb-3\">\n              <image :src=\"post.userInfo && post.userInfo.avatar ? post.userInfo.avatar : '/static/images/user-avatar.jpg'\" alt=\"用户头像\" class=\"avatar mr-3\"></image>\n              <view>\n                <text class=\"font-medium text-sm\">{{ post.userInfo && post.userInfo.nickname ? post.userInfo.nickname : '未知用户' }}</text>\n                <view class=\"text-xs text-gray-500\">{{ post.createdAt || '未知时间' }}</view>\n              </view>\n              <button \n                v-if=\"!post.isCurrentUser\"\n                class=\"ml-auto text-sm px-3 py-1 rounded-full border\" \n                :class=\"[post.isFollowed ? 'text-gray-400 border-gray-300' : 'text-green-500 border-green-500']\"\n                @tap=\"handleFollow(post)\">\n                {{ post.isFollowed ? '已关注' : '+ 关注' }}\n              </button>\n              \n              <!-- 删除按钮 -->\n              <view v-else class=\"ml-auto\" @tap.stop=\"showDeleteOption(post)\">\n                <icon-image :name=\"'more'\" size=\"16\" class=\"text-gray-600\"></icon-image>\n              </view>\n            </view>\n\n            <!-- 帖子内容 -->\n            <text class=\"text-sm mb-3\" @tap=\"navigateToDetail(post._id)\">{{ post.content || '' }}</text>\n\n            <!-- 图片 -->\n            <view v-if=\"post.images && post.images.length > 0\" class=\"mb-3\" @tap=\"navigateToDetail(post._id)\">\n              <!-- 单图样式 -->\n              <image \n                v-if=\"post.images.length === 1\" \n                :src=\"post.images[0]\" \n                alt=\"帖子图片\" \n                class=\"w-full h-48 object-cover rounded-lg\" \n                mode=\"aspectFill\"></image>\n              \n              <!-- 双图样式 -->\n              <view v-else-if=\"post.images.length === 2\" class=\"grid-2 gap-2\">\n                <image \n                  v-for=\"(img, imgIndex) in post.images\" \n                  :key=\"imgIndex\" \n                  :src=\"img\" \n                  alt=\"帖子图片\" \n                  class=\"grid-item\" \n                  mode=\"aspectFill\"></image>\n              </view>\n              \n              <!-- 多图样式 -->\n              <view v-else class=\"grid-3 gap-2\">\n                <image \n                  v-for=\"(img, imgIndex) in post.images.slice(0, 3)\" \n                  :key=\"imgIndex\" \n                  :src=\"img\" \n                  alt=\"帖子图片\" \n                  class=\"grid-item\" \n                  mode=\"aspectFill\"></image>\n                <view v-if=\"post.images.length > 3\" class=\"more-images\">\n                  <text>+{{ post.images.length - 3 }}</text>\n                </view>\n              </view>\n            </view>\n\n            <!-- 标签 -->\n            <view class=\"flex flex-wrap mb-3\">\n              <text \n                v-for=\"(tag, tagIndex) in formatTags(post.label || '')\" \n                :key=\"tagIndex\" \n                class=\"tag\" \n                :class=\"{'space-left': tagIndex > 0}\"\n                @tap=\"handleTagClick(tag)\">\n                # {{ tag }}\n              </text>\n            </view>\n\n            <!-- 互动数据 -->\n            <view class=\"flex justify-between text-gray-500 text-sm border-t pt-3\">\n              <view class=\"flex items-center\">\n                <image src=\"/static/images/icons/icon-eye.svg\" class=\"mr-1 icon-size\" mode=\"aspectFit\"></image>\n                <text>{{ post.eyes || 0 }}</text>\n              </view>\n              <view \n                class=\"flex items-center\" \n                :class=\"{'text-red-500': post.isLiked}\"\n                @tap=\"handleLike(post)\">\n                <image :src=\"post.isLiked ? '/static/images/icons/icon-heart-active.svg' : '/static/images/icons/icon-heart.svg'\" class=\"mr-1 icon-size\" mode=\"aspectFit\"></image>\n                <text>{{ post.likes || 0 }}</text>\n              </view>\n              <view class=\"flex items-center\" @tap=\"navigateToDetail(post._id)\">\n                <image src=\"/static/images/icons/icon-comment.svg\" class=\"mr-1 icon-size\" mode=\"aspectFit\"></image>\n                <text>{{ post.comments || 0 }}</text>\n              </view>\n              <view \n                class=\"flex items-center\" \n                :class=\"{'text-green-500': post.isCollected}\"\n                @tap=\"handleCollect(post)\">\n                <image src=\"/static/images/icons/icon-bookmark.svg\" class=\"mr-1 icon-size\" mode=\"aspectFit\"></image>\n                <text>{{ post.isCollected ? '已收藏' : '收藏' }}</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </block>\n\n      <!-- 加载更多 -->\n      <view v-if=\"hasMore && posts.length > 0\" class=\"flex justify-center py-4\">\n        <text class=\"text-sm text-gray-500\" @tap=\"loadMore\">加载更多</text>\n      </view>\n    </view>\n\n    <!-- 悬浮发布按钮 -->\n    <view class=\"float-btn\" @tap=\"navigateToPublish\">\n      <view class=\"float-btn-inner\">\n        <text class=\"plus-text\">+</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, reactive, computed } from 'vue';\nimport { onShow, onPullDownRefresh } from '@dcloudio/uni-app';\nimport { getPosts, likePost, collectPost, getPostDetail, deletePost, searchPosts } from '@/services/community';\nimport { getCurrentUser } from '@/services/login';\nimport IconImage from '../../components/IconImage.vue';\n\n// 为了在模板中使用组件，需要创建别名\nconst IconEye = IconImage;\nconst IconHeart = IconImage;\nconst IconComment = IconImage;\nconst IconPlus = IconImage;\nconst IconBookmark = IconImage;\nconst IconSearch = IconImage;\nconst IconCloseCircle = IconImage;\nconst IconMore = IconImage;\n\n// 搜索关键词\nconst searchKeyword = ref('');\n// 是否处于搜索模式\nconst isSearchMode = ref(false);\n\n// 帖子数据\nconst posts = ref([]);\nconst currentPage = ref(1);\nconst pageSize = ref(10);\nconst total = ref(0);\nconst hasMore = ref(true);\nconst loading = ref(false);\n\n// 当前选中的标签\nconst activeTab = ref('recommend');\n\n// 切换标签\nconst switchTab = (tab) => {\n  if (activeTab.value === tab) return;\n  activeTab.value = tab;\n  currentPage.value = 1;\n  posts.value = [];\n  // 切换标签时退出搜索模式\n  if (isSearchMode.value) {\n    isSearchMode.value = false;\n    searchKeyword.value = '';\n  }\n  loadPosts();\n};\n\n// 加载帖子\nconst loadPosts = async (isRefresh = false) => {\n  if (isRefresh) {\n    currentPage.value = 1;\n    hasMore.value = true;\n  }\n  \n  if (!hasMore.value && !isRefresh) {\n    uni.showToast({\n      title: '没有更多内容了',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  try {\n    loading.value = true;\n    \n    let result;\n    \n    // 根据是否有搜索关键词决定调用哪个API\n    if (isSearchMode.value && searchKeyword.value.trim()) {\n      // 调用搜索API\n      result = await searchPosts(searchKeyword.value, {\n        page: currentPage.value,\n        pageSize: pageSize.value\n      });\n    } else {\n      // 构建查询参数\n      const options = {\n        filter: activeTab.value,\n        page: currentPage.value,\n        pageSize: pageSize.value\n      };\n      \n      // 调用常规获取帖子API\n      result = await getPosts(options);\n    }\n    \n    // 确保result和result.posts存在\n    if (result && result.posts) {\n      // 更新帖子列表\n      if (isRefresh) {\n        posts.value = result.posts;\n      } else {\n        posts.value = [...posts.value, ...result.posts];\n      }\n      \n      // 更新总数\n      total.value = result.total || 0;\n      \n      // 判断是否有更多数据\n      hasMore.value = posts.value.length < total.value;\n      \n      // 增加页码\n      if (hasMore.value) {\n        currentPage.value++;\n      }\n    } else {\n      // 如果返回数据格式不对，设置空数组\n      if (isRefresh) {\n        posts.value = [];\n      }\n      hasMore.value = false;\n      console.error('返回数据格式不正确:', result);\n    }\n  } catch (error) {\n    console.error('加载帖子失败', error);\n    uni.showToast({\n      title: '加载失败，请重试',\n      icon: 'none'\n    });\n  } finally {\n    loading.value = false;\n    if (isRefresh) {\n      uni.stopPullDownRefresh();\n    }\n  }\n};\n\n// 加载更多\nconst loadMore = () => {\n  if (!hasMore.value || loading.value) return;\n  currentPage.value++;\n  loadPosts();\n};\n\n// 搜索\nconst handleSearch = () => {\n  if (!searchKeyword.value.trim()) {\n    // 如果搜索框为空，并且之前处于搜索模式，则重置为普通模式\n    if (isSearchMode.value) {\n      isSearchMode.value = false;\n      currentPage.value = 1;\n      loadPosts();\n    }\n    return;\n  }\n  \n  // 设置为搜索模式\n  isSearchMode.value = true;\n  currentPage.value = 1;\n  posts.value = [];\n  loadPosts();\n};\n\n// 点击标签\nconst handleTagClick = (tag) => {\n  searchKeyword.value = tag;\n  handleSearch();\n};\n\n// 格式化标签\nconst formatTags = (labelStr) => {\n  if (!labelStr) return [];\n  return labelStr.split(',').map(item => item.trim()).filter(Boolean);\n};\n\n// 处理点赞\nconst handleLike = async (post) => {\n  try {\n    // 切换点赞状态\n    post.isLiked = !post.isLiked;\n    post.likes += post.isLiked ? 1 : -1;\n    \n    // 调用API保存点赞状态\n    try {\n      await likePost(post._id, post.isLiked);\n    } catch (apiError) {\n      console.error('API调用失败，但继续使用本地状态', apiError);\n    }\n    \n    // 保存交互状态\n    savePostInteraction(post);\n  } catch (error) {\n    console.error('点赞操作失败', error);\n    uni.showToast({\n      title: error.message || '操作失败，请重试',\n      icon: 'none'\n    });\n  }\n};\n\n// 处理收藏\nconst handleCollect = async (post) => {\n  try {\n    // 切换收藏状态\n    post.isCollected = !post.isCollected;\n    \n    // 保存交互状态\n    savePostInteraction(post);\n  } catch (error) {\n    console.error('收藏操作失败', error);\n    uni.showToast({\n      title: error.message || '操作失败，请重试',\n      icon: 'none'\n    });\n  }\n};\n\n// 处理关注\nconst handleFollow = async (post) => {\n  try {\n    // 切换关注状态\n    post.isFollowed = !post.isFollowed;\n    \n    // 保存交互状态\n    savePostInteraction(post);\n  } catch (error) {\n    console.error('关注操作失败', error);\n    uni.showToast({\n      title: error.message || '操作失败，请重试',\n      icon: 'none'\n    });\n  }\n};\n\n// 保存帖子交互状态\nconst savePostInteraction = (post) => {\n  if (!post || !post._id) return;\n  \n  try {\n    let postInteractions = {};\n    const cachedInteractions = uni.getStorageSync('post_interactions');\n    if (cachedInteractions) {\n      postInteractions = JSON.parse(cachedInteractions);\n    }\n    \n    postInteractions[post._id] = {\n      eyes: post.eyes,\n      likes: post.likes,\n      comments: post.comments,\n      isLiked: post.isLiked,\n      isCollected: post.isCollected,\n      isFollowed: post.isFollowed\n    };\n    \n    uni.setStorageSync('post_interactions', JSON.stringify(postInteractions));\n    \n    // 如果是本地发布的帖子，也更新local_posts中的状态\n    let localPosts = [];\n    const cachedPosts = uni.getStorageSync('local_posts');\n    if (cachedPosts) {\n      localPosts = JSON.parse(cachedPosts);\n      const postIndex = localPosts.findIndex(p => p._id === post._id);\n      if (postIndex !== -1) {\n        localPosts[postIndex].likes = post.likes;\n        localPosts[postIndex].isLiked = post.isLiked;\n        localPosts[postIndex].isCollected = post.isCollected;\n        localPosts[postIndex].isFollowed = post.isFollowed;\n        uni.setStorageSync('local_posts', JSON.stringify(localPosts));\n      }\n    }\n  } catch (e) {\n    console.error('保存交互状态失败', e);\n  }\n};\n\n// 跳转到帖子详情页\nconst navigateToDetail = (postId) => {\n  uni.navigateTo({\n    url: `/pages/community/post-detail?id=${postId}`\n  });\n};\n\n// 跳转到发布页面\nconst navigateToPublish = () => {\n  uni.navigateTo({\n    url: '/pages/community/post-publish',\n    events: {\n      publishSuccess: () => {\n        if (activeTab.value === 'recommend') {\n          loadPosts();\n        } else if (activeTab.value === 'latest') {\n          loadPosts();\n        } else if (activeTab.value === 'hot') {\n          loadPosts();\n        } else if (activeTab.value === 'follow') {\n          loadPosts();\n        }\n      }\n    }\n  });\n};\n\n// 显示删除选项\nconst showDeleteOption = (post) => {\n  uni.showActionSheet({\n    itemList: ['删除'],\n    itemColor: '#ff0000',\n    success: (res) => {\n      if (res.tapIndex === 0) {\n        // 用户点击了\"删除\"选项\n        confirmDeletePost(post);\n      }\n    }\n  });\n};\n\n// 确认删除帖子\nconst confirmDeletePost = (post) => {\n  uni.showModal({\n    title: '确认删除',\n    content: '确定要删除这条帖子吗？删除后无法恢复。',\n    confirmColor: '#ff0000',\n    success: (res) => {\n      if (res.confirm) {\n        handleDeletePost(post._id);\n      }\n    }\n  });\n};\n\n// 处理删除帖子\nconst handleDeletePost = async (postId) => {\n  try {\n    uni.showLoading({ title: '删除中...' });\n    await deletePost(postId);\n    \n    // 从当前列表中移除该帖子\n    posts.value = posts.value.filter(post => post._id !== postId);\n    \n    uni.hideLoading();\n    uni.showToast({ \n      title: '删除成功',\n      icon: 'success'\n    });\n  } catch (error) {\n    uni.hideLoading();\n    uni.showToast({\n      title: error.message || '删除失败',\n      icon: 'none'\n    });\n  }\n};\n\n// 清除搜索\nconst clearSearch = () => {\n  searchKeyword.value = '';\n  // 如果处于搜索模式，退出搜索\n  if (isSearchMode.value) {\n    exitSearch();\n  }\n};\n\n// 退出搜索模式\nconst exitSearch = () => {\n  searchKeyword.value = '';\n  isSearchMode.value = false;\n  currentPage.value = 1;\n  posts.value = [];\n  loadPosts();\n};\n\n// 页面加载完成\nonMounted(() => {\n  loadPosts();\n});\n\n// 监听页面显示\nonShow(() => {\n  // 每次页面显示时刷新数据，确保显示最新发布的帖子\n  loadPosts();\n});\n\n// 下拉刷新\nonPullDownRefresh(() => {\n  loadPosts(true);\n});\n</script>\n\n<style>\n.container {\n  background-color: #f8f9fa;\n  font-family: \"PingFang SC\", \"Helvetica Neue\", Arial, sans-serif;\n  color: #333;\n  padding-bottom: 80px;\n}\n\n.search-container {\n  margin-bottom: 10px;\n  width: 100%;\n}\n\n.search-input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n  background-color: #f0f0f0;\n  border-radius: 20px;\n  padding: 0;\n  height: 36px;\n  box-sizing: border-box;\n}\n\n.search-input {\n  flex: 1;\n  height: 36px;\n  background-color: transparent;\n  border-radius: 20px;\n  padding-left: 40px;\n  padding-right: 15px;\n  font-size: 14px;\n  color: #666;\n  box-sizing: border-box;\n}\n\n.search-icon-wrapper, .clear-icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.search-icon {\n  position: absolute;\n  left: 15px;\n  top: 50%;\n  transform: translateY(-50%);\n  opacity: 0.5;\n}\n\n.clear-icon {\n  position: absolute;\n  right: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.search-status {\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 6px 12px;\n  border-radius: 8px;\n}\n\n.top-2-5 {\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.right-10 {\n  right: 40px;\n}\n\n.card {\n  border-radius: 16px;\n  overflow: hidden;\n  margin-bottom: 16px;\n}\n\n.avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background-color: #f5f5f5;\n}\n\n.tag {\n  border-radius: 12px;\n  padding: 2px 10px;\n  font-size: 12px;\n  background-color: rgba(76, 175, 80, 0.1);\n  color: #4CAF50;\n  display: inline-block;\n  margin-bottom: 6px;\n}\n\n.space-left {\n  margin-left: 8px;\n}\n\n.tab-btn {\n  position: relative;\n  padding-bottom: 10px;\n}\n\n.tab-indicator {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  width: 20px;\n  height: 3px;\n  background-color: #4CAF50;\n  border-radius: 3px;\n  transform: translateX(-50%);\n}\n\n.float-btn {\n  position: fixed;\n  bottom: 80px;\n  right: 20px;\n  width: 50px;\n  height: 50px;\n  z-index: 100;\n}\n\n.float-btn-inner {\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  background-color: #4CAF50;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 24px;\n}\n\n.plus-text {\n  color: white;\n  font-size: 30px;\n  font-weight: bold;\n  line-height: 30px;\n  text-align: center;\n  margin-top: -2px; /* 轻微上移调整垂直位置 */\n}\n\n.grid-2 {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n\n.grid-3 {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n}\n\n.gap-2 {\n  gap: 8px;\n}\n\n.grid-item {\n  width: 100%;\n  height: 128px;\n  border-radius: 8px;\n  object-fit: cover;\n}\n\n.more-images {\n  position: relative;\n  background-color: rgba(0, 0, 0, 0.5);\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.w-full {\n  width: 100%;\n}\n\n.h-48 {\n  height: 192px;\n}\n\n.object-cover {\n  object-fit: cover;\n}\n\n.rounded-lg {\n  border-radius: 8px;\n}\n\n.relative {\n  position: relative;\n}\n\n.absolute {\n  position: absolute;\n}\n\n.inset-0 {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.bg-black-50 {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.bg-black-60 {\n  background-color: rgba(0, 0, 0, 0.6);\n}\n\n.w-12 {\n  width: 48px;\n}\n\n.h-12 {\n  height: 48px;\n}\n\n.w-32 {\n  width: 128px;\n}\n\n.h-32 {\n  height: 128px;\n}\n\n.w-14 {\n  width: 56px;\n}\n\n.h-14 {\n  height: 56px;\n}\n\n.rounded-full {\n  border-radius: 9999px;\n}\n\n.text-white {\n  color: white;\n}\n\n.text-xl {\n  font-size: 20px;\n}\n\n.text-xs {\n  font-size: 12px;\n}\n\n.px-2 {\n  padding-left: 8px;\n  padding-right: 8px;\n}\n\n.py-1 {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.bottom-2 {\n  bottom: 8px;\n}\n\n.right-2 {\n  right: 8px;\n}\n\n.icon-size {\n  width: 16px;\n  height: 16px;\n}\n\n.plus-icon {\n  width: 24px;\n  height: 24px;\n}\n\n/* 工具类 */\n.px-4 { padding-left: 16px; padding-right: 16px; }\n.pt-10 { padding-top: 40px; }\n.pb-4 { padding-bottom: 16px; }\n.py-3 { padding-top: 12px; padding-bottom: 12px; }\n.p-4 { padding: 16px; }\n.p-3 { padding: 12px; }\n.pt-3 { padding-top: 12px; }\n.px-3 { padding-left: 12px; padding-right: 12px; }\n.py-1 { padding-top: 4px; padding-bottom: 4px; }\n.px-2 { padding-left: 8px; padding-right: 8px; }\n.py-10 { padding-top: 40px; padding-bottom: 40px; }\n.py-4 { padding-top: 16px; padding-bottom: 16px; }\n\n.mb-4 { margin-bottom: 16px; }\n.mb-3 { margin-bottom: 12px; }\n.mr-3 { margin-right: 12px; }\n.mr-1 { margin-right: 4px; }\n.ml-auto { margin-left: auto; }\n.ml-2 { margin-left: 8px; }\n.mt-3 { margin-top: 12px; }\n\n.bg-white { background-color: #ffffff; }\n.bg-gray-100 { background-color: #f3f4f6; }\n\n.text-gray-400 { color: #9ca3af; }\n.text-gray-500 { color: #6b7280; }\n.text-green-500 { color: #4CAF50; }\n.text-red-500 { color: #ef4444; }\n\n.flex { display: flex; }\n.items-center { align-items: center; }\n.justify-between { justify-content: space-between; }\n.justify-around { justify-content: space-around; }\n.justify-center { justify-content: center; }\n.flex-col { flex-direction: column; }\n.flex-wrap { flex-wrap: wrap; }\n\n.border-b { border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e5e7eb; }\n.border-t { border-top-width: 1px; border-top-style: solid; border-top-color: #e5e7eb; }\n.border { border-width: 1px; border-style: solid; }\n.border-green-500 { border-color: #4CAF50; }\n.border-gray-300 { border-color: #d1d5db; }\n\n.w-full { width: 100%; }\n.h-48 { height: 192px; }\n.w-14 { width: 56px; }\n.h-14 { height: 56px; }\n\n.rounded-lg { border-radius: 8px; }\n.rounded-full { border-radius: 9999px; }\n\n.object-cover { object-fit: cover; }\n\n.shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }\n\n.gap-2 { gap: 8px; }\n\n.relative { position: relative; }\n.absolute { position: absolute; }\n.inset-0 { top: 0; right: 0; bottom: 0; left: 0; }\n.right-3 { right: 12px; }\n.top-2-5 { top: 10px; }\n.bottom-2 { bottom: 8px; }\n.right-2 { right: 8px; }\n\n.search-input::placeholder {\n  color: #999;\n  font-size: 14px;\n}\n</style> ","import MiniProgramPage from 'D:/Documents/HBuilderProjects/CarbonFootprint/pages/community/community.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","searchPosts","getPosts","likePost","deletePost","onMounted","onShow","onPullDownRefresh","MiniProgramPage"],"mappings":"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"}